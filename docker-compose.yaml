services:
  nginx:
    restart: unless-stopped
    build:
      context: ./nginx/
      dockerfile: Dockerfile
    image: nginx:0.0.1
    container_name: nginx
    volumes:
     - ./templates:/etc/nginx/templates
    ports:
     - "8443:443"
    secrets:
      - ssl-key.pem
      - ssl-cert.pem
    environment:
     - NGINX_HOST=bigt.com
     - NGINX_PORT=443
  
secrets:
  ssl-key.pem:
    file: ./.secrets/ssl-key.pem
  ssl-cert.pem:
    file: ./.secrets/ssl-cert.pem